# MySQL docker script

### 생성

- run.sh 파일을 실행하여 생성 및 실행.
  - --rm 옵션을 주어 stop 시에는 컨테이너가 자동 삭제된다.
  - 따라서 start.sh 스크립트는 없고 다시 실행할 때는 run.sh를 실행하면 된다.
  - --rm 옵션이 있으므로 재부팅시 자동 실행 옵션은 없다.
- 이름은 "mysql" 이다.
- 외부 폴더를 docker 컨테이너의 /var/lib/mysql 폴더로 마운팅해서 사용.  
  외부 폴더의 경로는 원하는 폴더의 경로를 사용.
- 포트는 다음과 같이 맵핑되어 있음. 적당히 원하는 값으로 변경하여 사용하면 됨.
  - Host:3308 => Image:3306
- 스크립트 파일에 root password가 지정되므로 run.sh 파일의 보안관리 필요.
  - 다른 스크립트들도 root password를 사용하기 때문에 모든 스크립트가 외부에 노출되지 않도록 주의한다.

### 중단

- stop.sh 파일을 실행하여 mysql 서버 종료.

### 시작

- stop.sh으로 종료된 상태에서 run.sh 파일을 실행하여 서버 시작. (컨테이너 이미지 재생성 됨)

### 백업/복원

- dump.sh 스크립트로 DB 전체 백업 진행. 
  - 스크립트 내용을 보면 맨 위에 선언된 상수들 값을 적당히 수정하여 백업 경로와 백업 파일 이름을 지정할 수 있다.
  - 백업 파일을 로컬과 NAS에 보관하고 오래된 파일을 삭제하도록 되어있으므로 적당히 경로와 보관 기관을 수정해서 사용한다.